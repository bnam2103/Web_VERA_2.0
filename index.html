<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>VERA AI</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
<!-- =========================
     BACKGROUND VIDEO
========================= -->
<video
  id="bg-video"
  autoplay
  muted
  loop
  playsinline
>
  <source src="background.mp4" type="video/mp4">
</video>

<!-- =========================
     INTRO OVERLAY (TRAILER)
========================= -->
<div id="intro" class="intro">
  <video
    id="intro-video"
    muted
    playsinline
    preload="metadata"
    poster="vera_poster.jpg"
  >
    <source src="VERA_commercial_2.mp4" type="video/mp4">
  </video>

  <button id="enable-sound" class="intro-btn sound">
    Watch the trailer
  </button>

  <button id="skip-intro" class="intro-btn skip">
    Skip the trailer
  </button>
</div>

<!-- =========================
     LANDING / HOME
========================= -->
<section id="home">

  <!-- TOP NAV -->
  <nav class="top-nav">
    <div class="nav-left">
      <a href="/" class="nav-logo" id="nav-home">VERA</a>
    </div>

    <div class="nav-right">
      <button class="nav-link" id="nav-about-vera">About VERA</button>
      <button class="nav-link" id="nav-about-me">About Me</button>
      <button class="nav-link" id="nav-projects">My Other Projects</button>

    </div>
  </nav>

  <header class="title-hero">
    <h1 class="title-text">
      VIRTUAL EXECUTIVE RESPONSE ASSISTANT
    </h1>

    <div class="scroll-hint">‚Üì</div>
  </header>

  <!-- HERO -->
  <header class="hero" id="about-vera">
    <div class="hero-split">

      <div class="hero-left">
        <button
          id="enter-vera"
          class="hero-label pulse"
          aria-label="Enter VERA app"
        >
          [ ABOUT VERA ]
        </button>
      </div>

      <div class="hero-right">
        <p class="hero-text">
          <span id="typed-text"></span>
        </p>
      </div>

    </div>
  </header>

  <header class="hero" id="about-me">
    <div class="hero-split reverse">

      <div class="hero-left hero-text-left">
        <p class="hero-text">
          My name is Nam, and I am a third-year undergraduate student majoring in Data Science 
          at the University of California, Irvine. Over the past year, I have developed a strong 
          interest in machine learning and artificial intelligence, which led me to participate 
          in Kaggle competitions and work on transformer models. These experiences ultimately 
          brought me to this project VERA. I value not only how systems function, but also how 
          they feel to use. My work blends engineering, design, and interaction, with a focus 
          on intentional, user-centered experiences.
        </p>
      </div>

      <div class="hero-right hero-label-right">
        <a
          href="https://www.linkedin.com/in/nam-nguyen-0aa9102a9/"
          target="_blank"
          rel="noopener noreferrer"
          class="hero-label pulse"
          aria-label="Open LinkedIn profile"
        >
          [ ABOUT ME ]
        </a>
      </div>

    </div>
  </header>

  <!-- =========================
        HERO ‚Äî OTHER PROJECTS
    ========================= -->
  <header class="hero" id="other-projects">
    <div class="hero-split">

      <div class="hero-left">
        <a
          href="https://github.com/bnam2103"
          target="_blank"
          rel="noopener noreferrer"
          class="hero-label pulse"
          aria-label="Open GitHub profile"
        >
          [ OTHER PROJECTS ]
        </a>
      </div>

      <div class="hero-right">
        <div class="projects-list">

          <a
            href="https://huggingface.co/nambn0321"
            target="_blank"
            rel="noopener noreferrer"
            class="project-item"
          >
            <h3>Transformer Models</h3>
            <p>Experiments with attention, fine-tuning, and sequence modeling.</p>
          </a>

          <a
            href="https://github.com/bnam2103/Kaggle_competitions"
            target="_blank"
            rel="noopener noreferrer"
            class="project-item"
          >
            <h3>Kaggle Competitions</h3>
            <p>Applied ML projects focused on feature engineering and modeling.</p>
          </a>

          <a
            href="https://github.com/bnam2103/Exploratory-Data-Analysis"
            target="_blank"
            rel="noopener noreferrer"
            class="project-item"
          >
            <h3>Data Analysis and presentations</h3>
            <p>Data analyses exploring pricing, experience, and predictive modeling across datasets.</p>
          </a>

        </div>
      </div>

    </div>
  </header>

</section>

<!-- =========================
     VERA APP (ORIGINAL UI)
========================= -->
<section id="vera-app" hidden>

  <div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">

      <section class="sidebar-section">
        <h2>About VERA</h2>
        <p>
          VERA is a conversational AI demonstrating real-time
          speech recognition, reasoning, and voice synthesis.
        </p>
        <p>
          Built to showcase an end-to-end ASR ‚Üí LLM ‚Üí TTS pipeline.
        </p>
        <p><strong>Created by Nom</strong></p>
      </section>

      <section class="sidebar-section">
        <h2>How to Use</h2>
        <ol>
          <li>Click the microphone to start listening</li>
          <li>Speak naturally</li>
          <li>Pause to let VERA think and respond</li>
          <li>Click the microphone again to stop listening</li>
        </ol>
      </section>

      <section class="sidebar-section">
        <h2>Feedback</h2>
        <textarea
          id="feedback-input"
          placeholder="Your feedback..."
          rows="3"
        ></textarea>
        <button id="send-feedback">Send Feedback</button>
        <div id="feedback-status"></div>
      </section>

      <section class="sidebar-section sidebar-bottom">
        <h2>Status</h2>
        <div id="server-status" class="server-status offline">
          üî¥ Server Offline
        </div>
        <p>Working Hours: 6pm ‚Äì 12am (PST)</p>
      </section>

    </aside>

    <!-- CHAT -->
    <main class="chat">

      <div class="conversation" id="conversation"></div>

      <div class="input-bar">
        <button id="record">üéôÔ∏è</button>
        <span id="status" class="status idle">Idle</span>
        <span
          id="server-status-inline"
          class="server-status offline mobile-only"
        >
          üî¥ Offline
        </span>
      </div>

      <audio id="audio" preload="auto"></audio>

    </main>

  </div>
</section>

<!-- =========================
     INTRO + NAV + SCROLL + TYPE LOGIC
========================= -->
<script>
  /* =========================
     DOM REFERENCES
  ========================= */

  const intro = document.getElementById("intro");
  const introVideo = document.getElementById("intro-video");
  const skipBtn = document.getElementById("skip-intro");
  const soundBtn = document.getElementById("enable-sound");

  const home = document.getElementById("home");
  const veraApp = document.getElementById("vera-app");
  const enterBtn = document.getElementById("enter-vera");

  const navHome = document.getElementById("nav-home");
  const navAboutVera = document.getElementById("nav-about-vera");

  const aboutVeraSection = document.getElementById("about-vera");
  const typedEl = document.getElementById("typed-text");

  const bgVideo = document.getElementById("bg-video");

  /* =========================
     GLOBAL CONFIG
  ========================= */

  const INTRO_SEEN_KEY = "vera_intro_seen_session";

  const MAX_SCROLL = 700;
  const BASE_BRIGHTNESS = 0.3;
  const DARK_RANGE = 0.25;

  /* Disable browser scroll restore */
  if ("scrollRestoration" in history) {
    history.scrollRestoration = "manual";
  }

  /* =========================
     INTRO LOGIC
  ========================= */

  function hideIntro() {
    intro.style.transition = "opacity 0.8s ease";
    intro.style.opacity = "0";

    setTimeout(() => {
      intro.remove();
      sessionStorage.setItem(INTRO_SEEN_KEY, "true");
    }, 800);
  }

  soundBtn.onclick = () => {
    introVideo.muted = false;
    introVideo.play();
    soundBtn.remove();
  };

  skipBtn.onclick = hideIntro;
  introVideo.onended = hideIntro;

  if (sessionStorage.getItem(INTRO_SEEN_KEY)) {
    intro.remove();
  }

  /* =========================
     NAVIGATION
  ========================= */

  // Scroll to About VERA
  navAboutVera.onclick = () => {
    aboutVeraSection.scrollIntoView({
      behavior: "smooth",
      block: "start"
    });
  };

  // Enter VERA App
  enterBtn.onclick = () => {
    home.hidden = true;
    veraApp.hidden = false;
    document.body.classList.add("app-open");
    window.scrollTo(0, 0);
  };

  // Logo reload (file-safe)
  navHome.onclick = (e) => {
    if (location.protocol === "file:") {
      e.preventDefault();
      location.reload();
    }
  };

  /* =========================
     SCROLL-BASED BACKGROUND
  ========================= */

  let ticking = false;

  window.addEventListener("scroll", () => {
    if (document.body.classList.contains("app-open")) return;

    if (!ticking) {
      requestAnimationFrame(() => {
        const progress = Math.min(window.scrollY / MAX_SCROLL, 1);

        /* ----- VIDEO DARKEN ----- */
        let darkT = progress;
        darkT = darkT * darkT * (3 - 2 * darkT); // smoothstep

        const brightness =
          Math.max(BASE_BRIGHTNESS - darkT * DARK_RANGE, 0.15);

        bgVideo.style.setProperty("--v-brightness", brightness);

        /* ----- VIDEO FADE ----- */
        const videoOpacity = Math.max(1 - progress * 1.2, 0);
        bgVideo.style.opacity = videoOpacity;

        /* ----- GRADIENT MORPH ----- */
        let gradT = 0;
        if (progress > 0.6) {
          gradT = (progress - 0.6) / 0.4;
          gradT = gradT * gradT;
        }

        const start = { r: 3, g: 6, b: 10 };
        const endTop = { r: 4, g: 8, b: 14 };
        const endBottom = { r: 8, g: 18, b: 32 };

        const lerp = (a, b) => Math.round(a + (b - a) * gradT);

        document.body.style.setProperty("--g1-r", lerp(start.r, endTop.r));
        document.body.style.setProperty("--g1-g", lerp(start.g, endTop.g));
        document.body.style.setProperty("--g1-b", lerp(start.b, endTop.b));

        document.body.style.setProperty("--g2-r", lerp(start.r, endBottom.r));
        document.body.style.setProperty("--g2-g", lerp(start.g, endBottom.g));
        document.body.style.setProperty("--g2-b", lerp(start.b, endBottom.b));

        ticking = false;
      });

      ticking = true;
    }
  });

  /* =========================
     TYPING ANIMATION
  ========================= */

  const ABOUT_TEXT = `VERA is a conversational AI that demonstrates real-time
speech recognition, reasoning, and voice synthesis. It listens,
understands, and responds (either with words or actions). VERA focuses
on creating meaningful interactions rather than just automation.`;
  typedEl.textContent = ABOUT_TEXT; // For instant display (no typing)
  let typeIndex = 0;
  let typingStarted = false;

  function startTyping() {
    if (typingStarted) return;
    typingStarted = true;

    // subtle pulse on [ ABOUT VERA ]
    enterBtn.classList.add("pulse");

    const typeInterval = setInterval(() => {
      typedEl.textContent += ABOUT_TEXT[typeIndex];
      typeIndex++;

      if (typeIndex >= ABOUT_TEXT.length) {
        clearInterval(typeInterval);
      }
    }, 16);
  }

  /* Trigger typing when About section enters view */
  const observer = new IntersectionObserver(
    ([entry]) => {
      if (entry.isIntersecting) {
        startTyping();
      }
    },
    { threshold: 0.4 }
  );

  // observer.observe(aboutVeraSection); // Disabled to auto-start typing on page load
  const navAboutMe = document.getElementById("nav-about-me");
  const aboutMeSection = document.getElementById("about-me");

  navAboutMe.onclick = () => {
    aboutMeSection.scrollIntoView({
      behavior: "smooth",
      block: "start"
    });
  };

  const navProjects = document.getElementById("nav-projects");
const projectsSection = document.getElementById("other-projects");

navProjects.onclick = () => {
  projectsSection.scrollIntoView({
    behavior: "smooth",
    block: "start"
  });
};
</script>


<script src="app.js"></script>
</body>
</html>

